apiVersion: policy.open-cluster-management.io/v1
kind: PolicyGenerator
metadata:
  name: bootstrap-policy-generator
policyDefaults:
  namespace: acm-policies
  remediationAction: enforce
placementBindingDefaults:
  name: "bootstrap"
policies:
  - name: eso-secret-store
    configurationPolicyAnnotations:
      apps.open-cluster-management.io/reconcile-option: replace
    manifests:
      - path: manifests/eso-secret-store/base/
  - name: gitops-subscription
    configurationPolicyAnnotations:
      apps.open-cluster-management.io/reconcile-option: replace
    manifests:
      - path: manifests/gitops-subscription/base/
  - name: gitops-control-plane
    configurationPolicyAnnotations:
      apps.open-cluster-management.io/reconcile-option: replace
    manifests:
      - path: manifests/gitops-control-plane/base/
policySets:
  - name: "bootstrap"
    description: "Policy for bootstrapping clusters using OpenShift GitOps"
    policies:
      - eso-secret-store
      - gitops-subscription
      - gitops-control-plane
    generatePolicySetPlacement: false
    placement:
      name: bootstrap

