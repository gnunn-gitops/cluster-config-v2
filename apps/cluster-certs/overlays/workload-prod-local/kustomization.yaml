apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ../../base

patches:
  - patch: |-
      - op: replace
        path: /spec/servingCerts/namedCertificates/0/names/0
        value: api.workload.ocplab.com
    target:
      kind: APIServer
      name: cluster
  - patch: |-
      - op: replace
        path: /spec/commonName
        value: "*.apps.workload.ocplab.com"
      - op: replace
        path: /spec/dnsNames
        value: "*.apps.workload.ocplab.com"
    target:
      kind: Certificate
      name: openshift-wildcard
  - patch: |-
      - op: replace
        path: /spec/commonName
        value: "api.workload.ocplab.com"
      - op: replace
        path: /spec/dnsNames
        value: "api.workload.ocplab.com"
    target:
      kind: Certificate
      name: openshift-api
